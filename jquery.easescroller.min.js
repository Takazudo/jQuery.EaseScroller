/*! jQuery.EaseScroller (https://github.com/Takazudo/jQuery.EaseScroller)
 * lastupdate: 2015-06-16
 * version: 1.2.0
 * author: 'Takazudo' Takeshi Takatsudo <takazudo@gmail.com>
 * License: MIT */
(function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var o in r)t.call(r,o)&&(e[o]=r[o]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};(function(t,r,n){var o,s,l;return l={},s=t(r),o=t(n),l.normalizeEasing=function(e){return"string"===t.type(e)?t.easing[e]:e},l.yOf=function(t){var e;for(e=0;t.offsetParent;)e+=t.offsetTop,t=t.offsetParent;return e},l.isHash=function(t){return/^#.+$/.test(t)},l.getWhereTo=function(e){var r;return r=t(e),r.data("scrollto")||r.attr("href")},l.calcY=function(e){var r,n;if("number"===t.type(e))return e;if("string"===t.type(e)){if(!l.isHash(e))return!1;r=o.find(e)}else r=t(e);return r.size()?n=l.yOf(r[0]):null},l.scrollTop=function(t){return t?t.scrollTop():o.scrollTop()||n.documentElement.scrollTop||n.body.scrollTop||r.pageYOffset||0},l.scrollLeft=function(t){var e;return e=t||o,e.scrollLeft()},l.ua=function(){var e,r,n;return r={},n=navigator.userAgent,e=function(e){var o;return o=!1,t.each(e,function(t,e){var s;return s=RegExp(e,"i"),Boolean(n.match(s))?(r[e]=!0,o=!0):r[e]=!1,!0}),o},e(["iphone","ipod","ipad"]||e(["android"]))&&(r.mobile=!0),r}(),l.Scroller=function(n){function i(e){null==e&&(e={}),this.options=t.extend({},l.Scroller.defaults),e&&this.option(e),this._handleMobile(),this._handleAltContainer()}var a;return e(i,n),a=["scrollstart","scrollend","scrollcancel"],i.defaults={speed:13,duration:350,changehash:!0,userskip:!0,selector:"a[href^=#]:not(.apply-noscroll)",adjustEndY:!1,dontAdjustEndYIfSelectorIs:null,dontAdjustEndYIfYis:null,easing:"swing",altScrollContainer:null},i.prototype._handleMobile=function(){return l.ua.mobile?(this.options.userskip=!1,this):this},i.prototype._handleAltContainer=function(){return this.options.altScrollContainer?(this.$altScrollContainer=t(this.options.altScrollContainer),this):void 0},i.prototype._invokeScroll=function(){var e,n=this;return e=function(){var e,o,s;return n._scrollDefer=t.Deferred(),n._scrollDefer.always(function(){return n._reservedHash=null,n._scrollDefer=null}),e=n.options,o=new EaseStepper({interval:e.speed,easing:e.easing,duration:e.duration,beginningValue:n._startY,endValue:n._endY}),s=function(t){return n.$altScrollContainer?n.$altScrollContainer.scrollTop(t.value):r.scrollTo(n._startX,t.value)},o.on("start",function(){return n.trigger("scrollstart",n._endY,n._reservedHash)}),o.on("step",function(t){return n._cancelNext?(n._cancelNext=!1,n._scrollDefer.reject(),o.stop(),n.trigger("scrollcancel",n._endY,n._reservedHash)):s(t)}),o.on("end",function(t){return s(t),n.options.changehash&&n._reservedHash&&(location.hash=n._reservedHash),n._scrollDefer.resolve(),n.trigger("scrollend",n._endY,n._reservedHash),n._startX=null}),o.start()},this._scrollDefer?this.stop().then(e):e(),this},i.prototype._prepareForScroll=function(e,r){var n,s,i;return i=!0,this.options.changehash&&(i=!1),this.options.adjustEndY===!1&&(i=!1),(null!=r?r.adjustEndY:void 0)===!1&&(i=!1),l.isHash(e)&&(this._reservedHash=e,this.options.dontAdjustEndYIfSelectorIs&&o.find(e).is(this.options.dontAdjustEndYIfSelectorIs)&&(i=!1)),s=l.calcY(e),s===!1?this:(this._startY=l.scrollTop(this.$altScrollContainer),s===this._startY?this:(this._startX=l.scrollLeft(this.$altScrollContainer),"number"===t.type(this.options.dontAdjustEndYIfYis)&&s===this.options.dontAdjustEndYIfYis&&(i=!1),n=0,null!=(null!=r?r.adjustEndY:void 0)?n=r.adjustEndY:this.options.adjustEndY!==!1&&(n=this.options.adjustEndY),s+=n,this._endY=this._normalizeEndYOverDoc(s),this))},i.prototype._normalizeEndYOverDoc=function(t){var e,r;return this.$altScrollContainer?t:(e=o.height(),r=s.height(),t+r>e&&(console.log("hoge"),t=e-r),0>t&&(console.log("hoge2"),t=0),t)},i.prototype.stop=function(){var e=this;return t.Deferred(function(t){return e._scrollDefer?(e._cancelNext=!0,e._scrollDefer.fail(function(){return t.resolve()})):t.resolve()}).promise()},i.prototype.option=function(e){var r=this;return e?(this.options=t.extend({},this.options,e),this._handleMobile(),t.each(a,function(t,e){return r.options[e]&&r.on(e,r.options[e]),!0}),this.options.easing=l.normalizeEasing(this.options.easing),this):this.options},i.prototype.live=function(t){var e;return t=t||this.options.selector,e=this,o.delegate(t,"click",function(t){var r;return t.preventDefault(),r=l.getWhereTo(this),e.scrollTo(r)}),this},i.prototype.scrollTo=function(t,e){return this._prepareForScroll(t,e),this._invokeScroll(),this._scrollDefer.promise()},i}(r.EaseStepperNs.Event),t.fn.easescrollable=function(e){var r;return r=new l.Scroller(e),this.each(function(){var e;return e=t(this),e.data("easescroller",r),e.data("easescrollerattached")?this:(e.bind("click",function(t){return t.preventDefault(),r.scrollTo(l.getWhereTo(this))}),e.data("easescrollerattached",!0))})},t.EaseScrollerNs=l,t.EaseScroller=l.Scroller})(jQuery,window,document)}).call(this);