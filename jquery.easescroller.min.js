/*! jQuery.EaseScroller (https://github.com/Takazudo/jQuery.EaseScroller)
 * lastupdate: 2013-04-22
 * version: 1.0.0
 * author: 'Takazudo' Takeshi Takatsudo <takazudo@gmail.com>
 * License: MIT */
(function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var o in r)t.call(r,o)&&(e[o]=r[o]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};(function(t,r,n){var o,s,i;return i={},s=t(r),o=t(n),i.normalizeEasing=function(e){return"string"===t.type(e)?t.easing[e]:e},i.yOf=function(t){var e;for(e=0;t.offsetParent;)e+=t.offsetTop,t=t.offsetParent;return e},i.isHash=function(t){return/^#.+$/.test(t)},i.getWhereTo=function(e){var r;return r=t(e),r.data("scrollto")||r.attr("href")},i.calcY=function(e){var r,n;if("number"===t.type(e))return e;if("string"===t.type(e)){if(!i.isHash(e))return!1;r=o.find(e)}else r=t(e);return r.size()?n=i.yOf(r[0]):null},i.scrollTop=function(){return o.scrollTop()||n.documentElement.scrollTop||n.body.scrollTop||r.pageYOffset||0},i.ua=function(){var e,r,n;return r={},n=navigator.userAgent,e=function(e){var o;return o=!1,t.each(e,function(t,e){var s;return s=RegExp(e,"i"),Boolean(n.match(s))?(r[e]=!0,o=!0):r[e]=!1,!0}),o},e(["iphone","ipod","ipad"]||e(["android"]))&&(r.mobile=!0),r}(),i.Scroller=function(n){function l(e){null==e&&(e={}),this.options=t.extend({},i.Scroller.defaults),e&&this.option(e),this._handleMobile()}var a;return e(l,n),a=["scrollstart","scrollend","scrollcancel"],l.defaults={speed:13,duration:350,changehash:!0,userskip:!0,selector:"a[href^=#]:not(.apply-noscroll)",adjustEndY:!1,dontAdjustEndYIfSelectorIs:null,dontAdjustEndYIfYis:null,easing:"swing"},l.prototype._handleMobile=function(){return i.ua.mobile?(this.options.userskip=!1,this):this},l.prototype._invokeScroll=function(){var e,n,o,s=this;return this._scrollDefer=t.Deferred(),this._scrollDefer.always(function(){return s._reservedHash=null,s._scrollDefer=null}),e=this.options,n=new EaseStepper({fps:e.speed,easing:e.easing,duration:e.duration,beginningValue:this._startY,endValue:this._endY}),o=function(t){return r.scrollTo(0,t.value)},n.on("start",function(){return s.trigger("scrollstart",s._endY,s._reservedHash)}),n.on("step",function(t){return s._cancelNext?(s._cancelNext=!1,s._scrollDefer.reject(),n.stop(),s.trigger("scrollcancel",s._endY,s._reservedHash)):o(t)}),n.on("end",function(t){return o(t),s.options.changehash&&s._reservedHash&&(location.hash=s._reservedHash),s._scrollDefer.resolve(),s.trigger("scrollend",s._endY,s._reservedHash)}),n.start(),this},l.prototype._prepareForScroll=function(e,r){var n,s,l;return l=!0,this.options.changehash&&(l=!1),this.options.adjustEndY===!1&&(l=!1),(null!=r?r.adjustEndY:void 0)===!1&&(l=!1),i.isHash(e)&&(this._reservedHash=e,this.options.dontAdjustEndYIfSelectorIs&&o.find(e).is(this.options.dontAdjustEndYIfSelectorIs)&&(l=!1)),s=i.calcY(e),s===!1?this:(this._startY=i.scrollTop(),s===this._startY?this:("number"===t.type(this.options.dontAdjustEndYIfYis)&&s===this.options.dontAdjustEndYIfYis&&(l=!1),n=0,null!=(null!=r?r.adjustEndY:void 0)?n=r.adjustEndY:this.options.adjustEndY!==!1&&(n=this.options.adjustEndY),s+=n,this._endY=this._normalizeEndYOverDoc(s),this))},l.prototype._normalizeEndYOverDoc=function(t){var e,r;return e=o.height(),r=s.height(),t+r>e&&(t=e-r),0>t&&(t=0),t},l.prototype.stop=function(){var e=this;return t.Deferred(function(t){return e._scrollDefer?(e._cancelNext=!0,e._scrollDefer.fail(function(){return t.resolve()})):t.resolve()}).promise()},l.prototype.option=function(e){var r=this;return e?(this.options=t.extend({},this.options,e),this._handleMobile(),t.each(a,function(t,e){return r.options[e]&&r.on(e,r.options[e]),!0}),this.options.easing=i.normalizeEasing(this.options.easing),this):this.options},l.prototype.live=function(t){var e;return t=t||this.options.selector,e=this,o.delegate(t,"click",function(t){var r;return t.preventDefault(),r=i.getWhereTo(this),e.scrollTo(r)}),this},l.prototype.scrollTo=function(t,e){return this._prepareForScroll(t,e),this._invokeScroll(),this._scrollDefer.promise()},l}(r.EaseStepperNs.Event),t.fn.easescrollable=function(e){var r;return r=new i.Scroller(e),this.each(function(){var e;return e=t(this),e.data("easescroller",r),e.data("easescrollerattached")?this:(e.bind("click",function(t){return t.preventDefault(),r.scrollTo(i.getWhereTo(this))}),e.data("easescrollerattached",!0))})},t.EaseScrollerNs=i,t.EaseScroller=i.Scroller})(jQuery,window,document)}).call(this);